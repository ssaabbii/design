# ML System Design Doc - [RU]
## Дизайн ML системы - Сервис по Рекомендации Уходовой Косметики 
 
### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

 **Бизнес-цель**: Помощь пользователям в получении персонализированных рекомендаций по уходу за кожей с целью увеличения продаж skin-care продуктов и повышения уровня удовлетворенности клиентов. 
 
 **Почему станет лучше, чем сейчас, от использования ML**: Сейчас людям, сложно определиться с выбором косметических продуктов из-зи недостаточно точных или обобщенных рекомендациями по уходу за кожей. Использование ML поможет точно определять проблемы кожи и, учитывая уникальные особенности каждого пользователя, такие как тип кожи, чувствительность и цели ухода, предоставлять персонализированные рекомендации. Так как система сможет обнаруживать проблемы кожи, которые обычно диагностируются косметологом, это может сократить затраты для клиентов.
 
 **Что будем считать успехом итерации с точки зрения бизнеса**: Работающий сервис для классификации проблем кожи и предоставления персонализированных рекомендаций на основе фотографии пользователя и указанных им особенностей кожи, удовлетворяющий заданным требованиям и ограничениям по качеству классификации, скорости работы, потребляемым ресурсам и показателям удовлетворения пользователей.

#### 1.2. Бизнес-требования и ограничения  

**Целевое решение:** сервис для рекомендации уходовой косметики

**Логика работы:**
- Пользователь загружает фотографию своей кожи и указывает особенности, такие как тип кожи, чувствительность и цели ухода.
- Сервис запускает модель классификации и обращается к набору данных, содержащему информацию о продуктах для ухода за кожей (назначение продукта, ингредиенты и т.д)
- Предоставление рекомендаций

**Бизнес-ограничения** :
- Скорость предоставления рекомендаций (быстрое получение рекомендаций "на лету")
- Ограниченный бюджет (0₽)
- Сроки разработки MVP (04.12.2023)
- Продукт предоставляет рекомендации, а не заменяет медицинские консультации.
- Рекомендации могут быть неудовлетворительными для пользователей, если проблема с их кожей имеет, например, гормональный характер, т.е. нуждается в 
- медикаментозном лечении, что не всегда удается проверить по фотографии
- Качество фотографий влияет на предсказания
- Должны соблюдаться законодательные требования и конфиденциальность данных
- Мало подходящих данных в открытом доступе
  
**Что мы ожидаем от конкретной итерации** : На первой итерации проекта будет реализован рабочий прототип в виде с возможностью загрузки фотографий, анализа кожи и предоставления рекомендаций (тг-бот). Этот прототип должен демонстрировать базовую функциональность и иметь Accuracy > 90%.

**Описание бизнес-процесса пилота, насколько это возможно - как именно мы будем использовать модель в существующем бизнес-процессе?**:
- Запущен сервис в партнерстве с косметическими брендами, предоставляющий рекомендации и информацию о продуктах
- После заполнения небольшой анкеты и отправки фотографии, пользователь получает рекомендации по уходу за кожей
- WiP: Реализована обратная связь в виде анкеты об уровне удовлетворенности сервисом по 10 бальной шкале

**Что считаем успешным пилотом? Критерии успеха и возможные пути развития проекта:**
- Сотрудничество, как минимум, с одним косметическим брендом в первый месяц пилота
- Более 20 активных пользователей после недели запуска пилота
- WiP: Среднее удовлетворение пользователей по 10-бальной шкале на основе обратной связи - 7.5+

**Возможные пути развития проекта**:
- Проведение маркетинговых кампаний для привлечения новых пользователей.
-Разработка мобильного приложения для удобства пользователей
- Расширение сотрудничества с брендами
- Заявка на студенческий стартап
- Сервис-компаньон, который отслеживает состояние кожи с течением времени и под определенным уходом
- Интеграция большой языковой модели для индивидуализации подхода к диалогу с пользователем

#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

 **На закрытие каких БТ подписываемся в данной итерации:**
- Разработка и обучение модели классификации проблем кожи на основе фотографий и анкетных данных.
- Интеграция модели классификации с Telegram ботом для предоставления рекомендаций по уходу за кожей.
- Проведение тестирования бота на ограниченной аудитории и сбор обратной связи от пользователей.
- Тюнинг модели и оптимизация производительности бота для обеспечения высокой скорости предоставления рекомендаций.
- Интеграция анкет для пользователей, а также обработка их данных и учет при формировании рекомендаций.
  
**Что не будет закрыто:**
- Разработка и поддержка веб-сайта (разработка веб-сайта запланирована отдельно и не входит в текущий скоуп итерации).
- Расширение сотрудничества с косметическими брендами (это внесено в планы на будущие итерации, но не входит в текущий скоуп).
  
**Описание результата с точки зрения качества кода и воспроизводимости решения:**
- Код для обучения и интеграции модели классификации будет разработан и оформлен в репозитории с подробной документацией.
  
**Описание планируемого технического долга (что оставляем для дальнейшей продуктивизации):**
-  Возможность авторизации пользователей для обеспечения безопасности и конфиденциальности данных (планируется внедрить на будущих этапах).
- Разработка мобильного приложения для удобства пользователей (часть долгосрочных планов развития проекта).

#### 1.4. Предпосылки решения  
**Проблема**: В настоящий момент существует значительная неопределенность и сложности в выборе косметических продуктов, приспособленных к уходу за кожей. Пользователи сталкиваются с трудностью определения наилучших продуктов для их конкретных потребностей, что может привести к недовольству и отсутствию уверенности в покупках. Важно обратить внимание на следующие предпосылки:
- Недостаточная точность текущих рекомендаций
- Отсутствие индивидуализации
- Не у всех пользователей есть доступ к профессиональной консультации косметолога
  
**Зачем нужен сервис (пример использования)**:  Необходимо создать сервис, который способен точно классифицировать проблемы кожи пользователей на основе фотографий и анкетных данных, а также предоставлять персонализированные рекомендации по уходу за кожей. Этот сервис позволит пользователям принимать информированные решения о покупке косметических продуктов и поможет увеличить продажи продуктов для ухода за кожей.

### 2. Методология 

#### 2.1. Постановка задачи  

-  С технической точки зрения, наша задача заключается в разработке рекомендательной системы, объединяющей классификацию фотографий, обработку анкетных данных и интеграцию с базой данных продуктов для предоставления персонализированных рекомендаций по уходу за кожей.

#### 2.2. Блок-схема решения    
![image](https://github.com/ssaabbii/disign/assets/82314846/4aa2425f-8d4c-49a3-9d69-8b84accd4819)

#### 2.3. Этапы решения задачи  

- **Этап 0 - Подготовка данных:** Поиск подходящего датасета с необходимыми классами. При необходимсоти создание собственного. Создать базу данных с активами и продуктами, которые их содержат. Сначала сделаем таблицу с минимальныии данными (столбцы ["Актив",	"Типы кожи, для которых подходит",	"Проблемы кожи, для которых подходит"]), далее при сотрудничестве с партнерами дополнить таблицу дополнительными стобцами (["Продукт", "Описание продукта", "Категория продукта", "Тип кожи", "Проблемы кожи", "Бренд", ...]). Выбрать вопросы для анкетирования, основываясь на теоритических знаниях. При окончании этапа ожидается датасет с изображениями, таблица с минимальными данными и шаблон анкеты.
  
- **Этап 1 - Интеграция в Telegram бота:** Разобраться с созданием бота, изучить необходимые библиотеки. Обучить нейронную сеть на датасете. Ингтегрировать ее в бота. Проверить работоспосбность. Для рекомендаций в начале проекта, попробуем без обучения ML модели. Вместо этого, можно использовать простые эвристические правила или базовые методы рекомендации, основанные на сопоставлении типов кожи и проблем с активами в нашей упрощенной таблице данных. Когда будет достаточно данных, начать обучение ML модели для более точных и персонализированных рекомендаций. При окончании этапа ожидается работающий тг-бот, который классифицирует проблему и дает рекомендацию.
  
- **Этап 2 - Тестирование и фидбэк:** Ввести обратную связь для пользователей (удовлетворенность по 10-бальной шкале). Проверить работу бота на ограниченной группе людей, получить фидбэк. Проанализировать и выявить то, что нужно изменить. При окончании этапа ожидается выявление необходимых корректировок по итогам тестирования.
  
- **Этап 3 - Опитимизация и улучшение:** Тюнинг нейронной сети для повышения метрики. При расширении базы данных обучение ML модели для более точных рекомендаций. Увеличение скорости работы бота. При окончании этапа ожидается работающий тг-бот (классификация + рекомендации) с улучшенными метриками и меньшим временем для обработки запроса.
  
- **Этап 4 - Интеграция анкетирования:** Помимо фотографии пользователю предлагается ответить на несколько вопросов. Реализовать этот функционал для бота. Данные будут учитываться для рекомендаций вместе с существующей таблицей данных. При окончании этапа ожидается работающий тг-бот, принимающий фото и ответы на заданные вопросы, после обработки пользователь получает рекомендации.
  
- **Этап 5 - Подготовка пилота:** Запуск пилотного проекта с ограниченным количеством пользователей, получение фидбэка. Понять успех/не успех. При успешном пилоте продолжить развитие проекта и перейти к этапу 6. При окончании этапа ожидается пилот (на базе тг бота).
  
- **Этап 6 - Разработка веб-сайта.**


### 3. Подготовка пилота  
  
#### 3.1. Способ оценки пилота  
  
- Проведение пилотного тестирования бота на ограниченной аудитории пользователей, включая сбор обратной связи.
- Оценка количества активных пользователей после недели запуска пилота.
- Анкета об уровне удовлетворенности сервисом с использованием 10-бальной шкалы.
- Анализ обратной связи и оценка ее качества.
- Расчет среднего уровня удовлетворенности пользователей на основе анкет.
#### 3.2. Что считаем успешным пилотом  
  
- Сотрудничество с, как минимум, одним косметическим брендом в первый месяц пилота.
- Более 20 активных пользователей после 2 недель запуска пилота.
- Средний уровень удовлетворенности >= 7.5 (/10).   
  
#### 3.3. Подготовка пилота  
  
- Разработка четкого графика и плана действий для успешного запуска и проведения пилотного проекта
- ...
### 4. Внедрение `для production систем, если требуется`    

На данной итерации не требуется.
  
  
> ### Материалы для дополнительного погружения в тему  
> - [Шаблон ML System Design Doc [EN] от AWS](https://github.com/eugeneyan/ml-design-docs) и [статья](https://eugeneyan.com/writing/ml-design-docs/) с объяснением каждого раздела  
> - [Верхнеуровневый шаблон ML System Design Doc от Google](https://towardsdatascience.com/the-undeniable-importance-of-design-docs-to-data-scientists-421132561f3c) и [описание общих принципов его заполнения](https://towardsdatascience.com/understanding-design-docs-principles-for-achieving-data-scientists-53e6d5ad6f7e).
> - [ML Design Template](https://www.mle-interviews.com/ml-design-template) от ML Engineering Interviews  
> - Статья [Design Documents for ML Models](https://medium.com/people-ai-engineering/design-documents-for-ml-models-bbcd30402ff7) на Medium. Верхнеуровневые рекомендации по содержанию дизайн-документа и объяснение, зачем он вообще нужен  
> - [Краткий Canvas для ML-проекта от Made with ML](https://madewithml.com/courses/mlops/design/#timeline). Подходит для верхнеуровневого описания идеи, чтобы понять, имеет ли смысл идти дальше.  
